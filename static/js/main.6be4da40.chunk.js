(this["webpackJsonpdog-analyzer"]=this["webpackJsonpdog-analyzer"]||[]).push([[0],{31:function(e,t,n){e.exports=n(65)},32:function(e,t,n){},38:function(e,t,n){},60:function(e,t){},61:function(e,t){},62:function(e,t){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);n(32);var a=n(1),r=n.n(a),c=n(22),l=n.n(c),u=n(2),s=n.n(u),o=n(7),i=n(4),f=n(5),m=(n(38),n(23)),d=n.n(m).a.create({baseURL:"https://dog.ceo/api",timeout:0}),p=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/breed/".concat(t,"/images"));case 2:return n=e.sent,a=n.data.message,r={breeds:a},e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(o.a)(n),e.prev=1,a.s();case 3:if((r=a.n()).done){e.next=10;break}if(c=r.value,!t.has(c)){e.next=8;break}return e.next=8,p(c).then((function(e){return e}));case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a.e(e.t0);case 15:return e.prev=15,a.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})),h=n(24),v=function(){var e=Object(i.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(void 0===t)n(new Error("File upload cancelled."));else{var a=new FileReader;a.readAsDataURL(t),a.addEventListener("load",(function(){var n={imageSource:a.result,name:t.name.replace(/(?:[\0-\/:-@\[-\^`\{-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])[a-z]+/,"")};e(n)})),a.addEventListener("error",(function(){n(new Error("Error caught: when reading a file"))}))}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=[];e.forEach((function(e){/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/.test(e)?t.push(e.split(" ")):t.push([e])}));var n=new Set(t.flat());return Array.from(Array.from(n))},x=Object(a.forwardRef)((function(e,t){var n=e.src,a=e.alt;return r.a.createElement("figure",{className:"flex justify-center"},r.a.createElement("img",{src:n,alt:a,ref:t,className:"object-center sm:object-top md:object-right lg:object-bottom xl:object-left h-40"}))})),E=function(e){return e.replace(/\b[0-9A-Z_a-z]/,(function(e){return e.toUpperCase()}))},j=function(e){var t=e.title.map((function(e){return E(e)})),n=t.length>1?t.join("/"):t.join(" ");return r.a.createElement("div",{className:"flex flex-col justify-center"},0===n.length?r.a.createElement("h1",{className:"text-center text-2xl font-bold"},"Analyzing..."):r.a.createElement("h1",{className:"text-center px-2"},"Preview: You have uploaded a picture of a dog and it is classified as"," ",r.a.createElement("span",{className:"font-bold"},n)))},y=function(e){var t=e.classifiedDogNames,n=e.onUploadStarted,c=e.onUploadCompleted,l=Object(a.useRef)(null),u=Object(a.useRef)(null),o=Object(a.useState)(null),m=Object(f.a)(o,2),d=m[0],p=m[1],b=function(){var e=Object(i.a)(s.a.mark((function e(t){var a,r,u,o,i,m,d,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.files,r=a,void 0!==n&&void 0!==r[0]&&n(),e.prev=3,e.next=6,v(r[0]);case 6:if(u=e.sent,p(u),null===l.current){e.next=18;break}return e.next=11,h.a();case 11:return o=e.sent,e.next=14,o.classify(l.current);case 14:i=e.sent,m=Object(f.a)(i,1),d=m[0].className,b=g(d.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]|,/).map((function(e){return e.toLowerCase().replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]/,"")})).filter((function(e){return e}))),c(b);case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),console.warn(e.t0);case 23:return e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(a.Fragment,null,r.a.createElement("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",ref:u}),r.a.createElement("div",null,null===d?null:r.a.createElement(a.Fragment,null,r.a.createElement(j,{title:t}),r.a.createElement(x,{src:d.imageSource,alt:d.name,ref:l}))),r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("button",{className:"w-auto mt-1 bg-blue-600 hover:bg-blue-500 px-6 py-3 text-white font-bold rounded",onClick:function(e){var t;e.preventDefault(),null===(t=u.current)||void 0===t||t.click()}},null===d?"Upload":"Change")))},w=function(e){var t=e.msg;return r.a.createElement("div",{className:"text-white font-bold flex justify-center items-center h-screen"},r.a.createElement("span",{className:"block text-center"},t))},F=n(29),N=n(25),O=n(26),k=n(30),D=n(28),S=(n(63),n(27)),R=n.n(S),C=function(e){Object(k.a)(n,e);var t=Object(D.a)(n);function n(e){var r;return Object(N.a)(this,n),(r=t.call(this,e)).MAX_LIMIT=13,r.containerReference=Object(a.createRef)(),r.currentCount=0,r.loadMoreImages=function(e,t){for(var n=[],a=e;a<e+t;a++)void 0!==r.props.breeds[a]&&n.push(r.props.breeds[a]);r.setState({breeds:[].concat(Object(F.a)(r.state.breeds),n),loading:!1})},r.onScrollHandler=function(){null!==r.containerReference.current&&r.containerReference.current.scrollTop+r.containerReference.current.clientHeight>=r.containerReference.current.scrollHeight&&!1===r.state.loading&&!1===r.state.finished&&(r.state.breeds.length>=r.props.breeds.length?r.setState({finished:!0,loading:!1}):(r.currentCount+=13,r.setState({loading:!0},(function(){return setTimeout((function(){return r.loadMoreImages(r.currentCount,r.MAX_LIMIT)}),1e3*Math.random())}))))},r.state={breeds:[],finished:!1,loading:!1},r}return Object(O.a)(n,[{key:"componentDidMount",value:function(){null!==this.containerReference.current&&(this.containerReference.current.addEventListener("scroll",this.onScrollHandler),this.setState({loading:!0}),this.loadMoreImages(0,this.MAX_LIMIT))}},{key:"componentWillUnmount",value:function(){null!==this.containerReference.current&&this.containerReference.current.removeEventListener("scroll",this.onScrollHandler),this.currentCount=0}},{key:"render",value:function(){var e=this.state,t=e.breeds,n=e.finished,a=e.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container-full w-full py-2 border-gray-600 px-2"},r.a.createElement("div",{className:"mx-1 scrollable",ref:this.containerReference},r.a.createElement("div",{className:"grid grid-rows-auto grid-cols-3 gap-4"},t.map((function(e){return r.a.createElement(r.a.Fragment,{key:R()()},r.a.createElement("div",{className:"border border-gray-800 shadow"},r.a.createElement("img",{src:e,alt:"breeds",className:"object-cover w-full h-full"})))})))),r.a.createElement("div",{className:"flex flex-col justify-center items-center my-3"},!0===a?r.a.createElement("span",{className:"text-xl font-bold text-white"},"Loading..."):null,!0===n?r.a.createElement("h1",{className:"text-sm text-white text-center w-6/12"},"Hope you enjoyed the gallery show! why don't you upload an another breed"):null)))}}]),n}(a.PureComponent),A=(n(64),function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 4335 4335",width:"100",height:"100"},r.a.createElement("path",{fill:"#008DD2",d:"M3346 1077c41,0 75,34 75,75 0,41 -34,75 -75,75 -41,0 -75,-34 -75,-75 0,-41 34,-75 75,-75zm-1198 -824c193,0 349,156 349,349 0,193 -156,349 -349,349 -193,0 -349,-156 -349,-349 0,-193 156,-349 349,-349zm-1116 546c151,0 274,123 274,274 0,151 -123,274 -274,274 -151,0 -274,-123 -274,-274 0,-151 123,-274 274,-274zm-500 1189c134,0 243,109 243,243 0,134 -109,243 -243,243 -134,0 -243,-109 -243,-243 0,-134 109,-243 243,-243zm500 1223c121,0 218,98 218,218 0,121 -98,218 -218,218 -121,0 -218,-98 -218,-218 0,-121 98,-218 218,-218zm1116 434c110,0 200,89 200,200 0,110 -89,200 -200,200 -110,0 -200,-89 -200,-200 0,-110 89,-200 200,-200zm1145 -434c81,0 147,66 147,147 0,81 -66,147 -147,147 -81,0 -147,-66 -147,-147 0,-81 66,-147 147,-147zm459 -1098c65,0 119,53 119,119 0,65 -53,119 -119,119 -65,0 -119,-53 -119,-119 0,-65 53,-119 119,-119z"})))}),z=new Map,M=function(){var e=Object(a.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),u=Object(f.a)(l,2),m=u[0],p=u[1],h=Object(a.useState)(null),v=Object(f.a)(h,2),g=v[0],x=v[1],E=Object(a.useState)(!1),j=Object(f.a)(E,2),F=j[0],N=j[1];Object(a.useEffect)((function(){d.get("/breeds/list/all").then((function(e){Object.keys(e.data.message).forEach((function(t){z.set(t,e.data.message[t])}))})).catch((function(e){console.warn(e)}))}),[]);var O=function(){var e=Object(i.a)(s.a.mark((function e(t){var n,a,r,l,u,i,f,m,d,h,v,g,E;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F&&N(!1),c(t),x(!0),n=[],a=Object(o.a)(t);try{for(a.s();!(r=a.n()).done;)l=r.value,z.has(l)&&n.push(l)}catch(s){a.e(s)}finally{a.f()}c(n),u=b(z,t),i=[];case 9:if(!0!==(f=u.next()).done){e.next=13;break}return e.abrupt("break",16);case 13:i.push(f.value),e.next=9;break;case 16:return e.next=18,Promise.all(i);case 18:m=e.sent,d=[],h=Object(o.a)(m);try{for(h.s();!(v=h.n()).done;)g=v.value,d.push(g.breeds)}catch(s){h.e(s)}finally{h.f()}return E=d.flat(),p(E),x(!1),0===E.length&&N(!0),e.abrupt("return",!1);case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"text-3xl text-black font-bold text-center"},"Dogs gallery"),r.a.createElement("div",{className:"flex justify-center items-center"},r.a.createElement("div",{className:"mt-2 w-5/6 flex flex-col justify-center items-center border-2 left-container"},r.a.createElement(y,{onUploadStarted:function(){p([])},onUploadCompleted:O,classifiedDogNames:n})),r.a.createElement("div",{className:"w-full mt-2 bg-gray-700 border-2 right-container"},"object"===typeof g?r.a.createElement(w,{msg:"Gallery will be display as soon as you upload your dog's picture."}):!0===g?r.a.createElement("div",{className:"flex justify-center items-center h-screen"},r.a.createElement(A,null)):m.length>0?r.a.createElement("div",{className:"h-screen"},r.a.createElement(C,{breeds:m})):!0===F?r.a.createElement(w,{msg:"No results found!"}):null)))};l.a.render(r.a.createElement(M,null),document.querySelector("#root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.6be4da40.chunk.js.map